<!-- Shopify Add-Ons Template: Main Product + Chargeable Add-Ons -->
<!-- Place this in your product template or as a custom section/snippet -->

<form id="main-product-form">
  <!-- Main Product Variant ID (replace with your main product's variant ID) -->
  <input type="hidden" id="main-variant-id" value="MAIN_PRODUCT_VARIANT_ID">

  <label>Quantity</label>
  <input type="number" id="main-quantity" min="1" value="1" required>

  <h3>Add-Ons (Charged Separately):</h3>
  <div>
    <!-- Replace ADDON_VARIANT_ID_X and Add-On Name with your add-on products -->
    <input type="checkbox" class="addon-checkbox" data-variant-id="ADDON_VARIANT_ID_1" value="Add-On 1"> Add-On 1 (+$X.XX)<br>
    <input type="checkbox" class="addon-checkbox" data-variant-id="ADDON_VARIANT_ID_2" value="Add-On 2"> Add-On 2 (+$X.XX)<br>
    <input type="checkbox" class="addon-checkbox" data-variant-id="ADDON_VARIANT_ID_3" value="Add-On 3"> Add-On 3 (+$X.XX)<br>
  </div>

  <button type="submit">Add to Cart</button>
</form>
<div id="cart-message"></div>

<script>
document.getElementById('main-product-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const mainVariantId = document.getElementById('main-variant-id').value;
  const mainQuantity = parseInt(document.getElementById('main-quantity').value, 10);
  const checkboxes = document.querySelectorAll('.addon-checkbox:checked');
  let items = [
    { id: mainVariantId, quantity: mainQuantity }
  ];
  checkboxes.forEach(cb => {
    items.push({
      id: cb.dataset.variantId,
      quantity: mainQuantity
    });
  });
  // Add all items to cart in one request
  const res = await fetch('/cart/add.js', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ items })
  });
  if (res.ok) {
    document.getElementById('cart-message').innerText = 'Items added to cart!';
  } else {
    document.getElementById('cart-message').innerText = 'Error adding to cart.';
  }
});
</script>

<!-- Instructions:
1. Replace MAIN_PRODUCT_VARIANT_ID with your main product's variant ID.
2. Replace ADDON_VARIANT_ID_X and Add-On names/prices with your add-on products.
3. Place this code in your product template, section, or snippet.
4. Style as needed. -->
